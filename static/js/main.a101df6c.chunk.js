(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{18:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(20),s=n.n(o),c=(n(18),n(24)),i=n(3),l=n.p+"static/media/avatar-loader.7741db8b.gif",u=n(7),d=n.p+"static/media/logo.03b78ada.svg",p=n(9),j=n(0);var m=function(e){var t=e.userData,n=e.signOut,a=e.isMenuOpen;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:"navbar__item",children:Object(j.jsx)(p.b,{to:"#",className:"navbar__link ".concat(a?"navbar__link_place_wrap":""),children:t.email})}),Object(j.jsx)("li",{className:"navbar__item",children:Object(j.jsx)(p.b,{to:"/",onClick:n,className:"navbar__link ".concat(a?"navbar__link_place_wrap":""),children:"\u0412\u044b\u0439\u0442\u0438"})})]})};n.p;var _=function(e){var t=e.isLoggedIn,n=e.signOut,a=e.userData,r=e.location,o=e.handleMenuOpen,s=e.isMenuOpen;return Object(j.jsx)("ul",{className:"navbar",children:t?t&&window.innerWidth<768?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{className:"\n              header__menu-button \n              ".concat(s?"header__menu-button_type_opened":"header__menu-button_type_closed","\n            "),"aria-label":"menu button",onClick:o})}):Object(j.jsx)(m,{userData:a,signOut:n,isMenuOpen:s}):"/signup"===r.pathname?Object(j.jsx)("li",{className:"navbar__item",children:Object(j.jsx)(p.b,{to:"/signin",className:"navbar__link",children:"\u0412\u0445\u043e\u0434"})}):Object(j.jsx)("li",{className:"navbar__item",children:Object(j.jsx)(p.b,{to:"/signup",className:"navbar__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})})},b=n(2);var h=function(e){var t=Object(b.g)();return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("div",{className:"\n          user-data-wrap \n          ".concat(e.isMenuOpen?"":"user-data-wrap_visible_hidden","\n        "),children:Object(j.jsx)(m,Object(u.a)({},e))}),Object(j.jsx)("a",{href:"./",className:"header__logo-link",target:"_self",children:Object(j.jsx)("img",{src:d,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__logo"})}),Object(j.jsx)(_,Object(u.a)(Object(u.a)({},e),{},{location:t}))]})},f=r.a.createContext();var O=function(e){var t=e.card,n=e.openImage,a=e.onCardLike,o=e.onDeleteCardClick,s=r.a.useContext(f),c=s._id===t.owner._id,i=t.likes.some((function(e){return e._id===s._id}))?"galery__heart galery__heart_active":"galery__heart";return Object(j.jsxs)("article",{className:"galery__card",children:[Object(j.jsx)("button",{onClick:function(){o(t)},type:"button",className:"galery__delete-card-button galery__delete-card-button".concat(c?"":"_visible_hidden"),"aria-label":"Delete_card"}),Object(j.jsx)("img",{onClick:function(){n(t)},src:t.link,alt:t.name,className:"galery__img"}),Object(j.jsx)("h2",{className:"galery__text",children:t.name}),Object(j.jsxs)("div",{className:"galery__likes-wrap",children:[Object(j.jsx)("button",{onClick:function(){a(t)},type:"button","aria-label":"Like",className:i}),Object(j.jsx)("div",{className:"galery__heart galery__heart_loading galery__heart_visible_hidden"}),Object(j.jsx)("span",{className:"galery__likes-counter",children:t.likes.length})]})]})};var g=function(){return Object(j.jsx)("div",{className:"galery__card galery__card_loading"})};var x=function(e){var t=r.a.useContext(f);return Object(j.jsxs)("main",{children:[Object(j.jsxs)("section",{className:"profile",children:[Object(j.jsx)("button",{onClick:e.onEditAvatar,className:"profile__image profile__image",style:{backgroundImage:"url(".concat(t.avatar,")")},"aria-label":"\u0410\u0432\u0430\u0442\u0430\u0440"}),Object(j.jsxs)("div",{className:"profile__text-wrap",children:[Object(j.jsxs)("div",{className:"profile__title-wrap",children:[Object(j.jsx)("h1",{className:"profile__title","aria-label":"\u0418\u043c\u044f",children:t.name}),Object(j.jsx)("button",{onClick:e.onEditProfile,type:"button","aria-label":"Edit_profile",className:"profile__edit"})]}),Object(j.jsx)("p",{className:"profile__subtitle","aria-label":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:t.about})]}),Object(j.jsx)("button",{onClick:e.onAddPlace,type:"button","aria-label":"Add_img",className:"profile__add-card-button"})]}),Object(j.jsx)("section",{className:"galery galery_margins","aria-label":"\u0413\u0430\u043b\u0435\u0440\u0435\u044f",children:Object(j.jsx)("div",{className:"galery__cards",children:e.loadingSpinner?Object(j.jsx)(g,{}):e.cards.map((function(t){return Object(j.jsx)(O,{card:t,openImage:e.onCardClick,onCardLike:e.onCardLike,onDeleteCardClick:e.onDeleteCardClick},t._id)}))})})]})};var v=function(){return Object(j.jsx)("footer",{className:"footer",children:Object(j.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})};var N=function(e){return Object(j.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":""),children:Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsx)("button",{onClick:e.onClose,type:"button","aria-label":"Close_popup",className:"popup__exit-button exit exit_button_profile-popup"}),Object(j.jsx)("h3",{className:"popup__form-title",children:e.title}),Object(j.jsxs)("form",{onSubmit:e.onSubmit,name:"popup_form_".concat(e.name),className:"form popup__form",noValidate:!0,children:[e.children,Object(j.jsx)("button",{type:"submit",name:"submit-edit-profile",className:"form__submit form__submit_type_popup",children:e.submitName})]})]})})};var C=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,o=r.a.useContext(f),s=r.a.useState(""),c=Object(i.a)(s,2),l=c[0],u=c[1],d=r.a.useState(""),p=Object(i.a)(d,2),m=p[0],_=p[1];return r.a.useEffect((function(){u(o.name),_(o.about)}),[o]),Object(j.jsxs)(N,{name:"profile-edit-form",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",submitName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:l,about:m})},children:[Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{id:"user-name",type:"text",name:"popup_name",minLength:"2",maxLength:"40",placeholder:"\u0418\u043c\u044f",className:"form__input",value:l,onChange:function(e){u(e.target.value)},required:!0}),Object(j.jsx)("span",{className:"user-name-error form__error"})]}),Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{id:"user-description",type:"text",name:"popup_description",minLength:"2",maxLength:"200",placeholder:"\u0420\u043e\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",className:"form__input",value:m,onChange:function(e){_(e.target.value)},required:!0}),Object(j.jsx)("span",{className:"user-description-error form__error"})]})]})};var y=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,o=r.a.useRef("");return Object(j.jsx)(N,{name:"change-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",submitName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({avatar:o.current.value}),e.target.reset()},children:Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{id:"user-avatar",type:"url",name:"popup_description",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"form__input",ref:o,required:!0}),Object(j.jsx)("span",{className:"user-avatar-error form__error"})]})})};var k=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddPlace,o=r.a.useState(""),s=Object(i.a)(o,2),c=s[0],l=s[1],u=r.a.useState(""),d=Object(i.a)(u,2),p=d[0],m=d[1];return Object(j.jsxs)(N,{name:"cards-add-form",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",submitName:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:c,link:p}),l(""),m("")},children:[Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{id:"place-name",type:"text",name:"popup_name",minLength:"2",maxLength:"30",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"form__input",onChange:function(e){l(e.target.value)},value:c||"",required:!0}),Object(j.jsx)("span",{className:"place-name-error form__error"})]}),Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{id:"place-url",type:"url",name:"popup_description",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"form__input",onChange:function(e){m(e.target.value)},value:p||"",required:!0}),Object(j.jsx)("span",{className:"place-url-error form__error"})]})]})};var S=function(e){return Object(j.jsx)("div",{className:"popup galery galery_popup ".concat(e.card?"popup_opened":""),children:Object(j.jsxs)("figure",{className:"galery__popup-image-container",children:[Object(j.jsx)("button",{onClick:e.onClose,type:"button","aria-label":"Close_popup",className:"popup__exit-button galery__popup-exit"}),Object(j.jsx)("img",{src:e.card.link,alt:e.card.name,className:"galery__fulsize-img"}),Object(j.jsx)("figcaption",{className:"galery__popup-text",children:e.card.name})]})})};var E=function(e){var t=e.isOpen,n=e.onClose,a=e.onDeleteCard;return Object(j.jsx)(N,{name:"card-delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",submitName:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a()}})},T=n(22),L=n(23),w=new(function(){function e(t){Object(T.a)(this,e),this._url=t.url,this._headers=t.headers,this._body=t.body}return Object(L.a)(e,[{key:"_onError",value:function(e,t){return e.ok?e.json():Promise.reject("".concat(t,": ")+e.status)}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"users/me"),{headers:this._headers}).then((function(t){return e._onError(t,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}))}},{key:"editUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return t._onError(e,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}))}},{key:"getAllCards",value:function(){var e=this;return fetch("".concat(this._url,"cards/"),{headers:this._headers}).then((function(t){return e._onError(t,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a")}))}},{key:"addNewCard",value:function(e){var t=this;return fetch("".concat(this._url,"cards/"),{method:"POST",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return t._onError(e,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438")}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._onError(e,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u0447\u043e\u043a\u0438")}))}},{key:"handleCardLikeStatus",value:function(e,t){var n=this;console.log("hello from API!");var a=t?"PUT":"DELETE";return fetch("".concat(this._url,"cards/likes/").concat(e),{method:a,headers:this._headers}).then((function(e){return n._onError(e,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u043b\u0430\u0439\u043a\u0430")}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("https://mesto.nomoreparties.co/v1/cohort-20/users/me/avatar",{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return t._onError(e,"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0443")}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-20/",headers:{authorization:"036c4f02-47a4-4c62-a975-bbce507f165f"}});var D=function(){return Object(j.jsx)("h2",{className:"error",children:"404 \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430."})},P="https://auth.nomoreparties.co",A=n.p+"static/media/reg_confirm.1b6082f8.svg",I=n.p+"static/media/reg_failed.df8eddf6.svg";var U=function(e){var t=e.isOpen,n=e.src,a=e.title,r=e.handleCloseButton,o="";return"header"===e.type&&(o="popup__header-wrap"),Object(j.jsx)("div",{className:"popup ".concat(t?"popup_opened":""," ").concat(o),children:Object(j.jsxs)("div",{className:"popup__container popup__container_place_registration",children:[Object(j.jsx)("button",{onClick:r,type:"button","aria-label":"Close_popup",className:"popup__exit-button exit"}),Object(j.jsx)("img",{className:"popup__image",src:n,alt:a}),Object(j.jsx)("h3",{className:"popup__form-title",children:a})]})})};var R=Object(b.h)((function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)(""),c=Object(i.a)(s,2),l=c[0],d=c[1];return Object(j.jsxs)("section",{className:"sign",children:[Object(j.jsx)("h3",{className:"sign__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),e.infoTolltip.isOpen?Object(j.jsx)(U,Object(u.a)(Object(u.a)({},e.infoTolltip),{},{handleCloseButton:e.onClose})):null,Object(j.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),function(e,t){return fetch("".concat(P,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.ok?e.json():Promise.reject("### ERRROR: ".concat(e.status))})).catch((function(e){return console.log(e)}))}(r,l).then((function(t){t?(e.handleTooltip(!0,A,"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),setTimeout((function(){e.onClose(),e.history.push("/signin")}),2e3)):e.handleTooltip(!0,I,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")}))},children:[Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{className:" form__input  form__input_type_sign",placeholder:"Email",onChange:function(e){o(e.target.value)}}),Object(j.jsx)("span",{className:"email-name-error form__error"})]}),Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{className:" form__input  form__input_type_sign  form__input_type_password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",autoComplete:"none",onChange:function(e){d(e.target.value)}}),Object(j.jsx)("span",{className:"password-name-error form__error"})]}),Object(j.jsx)("button",{className:"form__submit form__submit_type_sign",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(j.jsxs)("span",{className:"sign__reg-question",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",Object(j.jsx)(p.b,{to:"/signin",className:"sign__link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}));var z=Object(b.h)((function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)(""),c=Object(i.a)(s,2),l=c[0],d=c[1];return Object(j.jsxs)("section",{className:"sign",children:[Object(j.jsx)("h3",{className:"sign__title",children:"\u0412\u0445\u043e\u0434"}),e.infoTolltip.isOpen?Object(j.jsx)(U,Object(u.a)(Object(u.a)({},e.infoTolltip),{},{handleCloseButton:e.onClose})):null,Object(j.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),function(e,t){return fetch("".concat(P,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.ok?e.json():Promise.reject("#### ERROR: ".concat(e.statusText))})).then((function(e){localStorage.setItem("token",e.token)}))}(r,l).then((function(){e.handleLoginStatus(),e.handleUserData({email:r}),e.history.push("/")})).catch((function(){e.handleTooltip(!0,I,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")}))},children:[Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{className:" form__input  form__input_type_sign",placeholder:"Email",onChange:function(e){o(e.target.value)}}),Object(j.jsx)("span",{className:"username-name-error form__error"})]}),Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{className:" form__input  form__input_type_sign  form__input_type_password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",autoComplete:"none",onChange:function(e){d(e.target.value)}}),Object(j.jsx)("span",{className:"password-name-error form__error"})]}),Object(j.jsx)("button",{className:"form__submit form__submit_type_sign",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})),M=n(25);var q=function(e){var t=e.component,n=Object(M.a)(e,["component"]);return Object(j.jsx)(b.b,{children:function(){return n.isLoggedIn?Object(j.jsx)(t,Object(u.a)({},n)):Object(j.jsx)(b.a,{to:"./signin"})}})};var J=Object(b.h)((function(e){var t=r.a.useState({email:null}),n=Object(i.a)(t,2),a=n[0],o=n[1],s=r.a.useState(!1),u=Object(i.a)(s,2),d=u[0],p=u[1],m=r.a.useState(!1),_=Object(i.a)(m,2),O=_[0],g=_[1],N=r.a.useState(!1),T=Object(i.a)(N,2),L=T[0],A=T[1],I=r.a.useState(!1),U=Object(i.a)(I,2),M=U[0],J=U[1],F=r.a.useState(!1),B=Object(i.a)(F,2),H=B[0],G=B[1],V=r.a.useState(!1),W=Object(i.a)(V,2),K=W[0],Q=W[1],X=r.a.useState([]),Y=Object(i.a)(X,2),Z=Y[0],$=Y[1],ee=r.a.useState(!0),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],re=r.a.useState({avatar:l,name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",about:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),oe=Object(i.a)(re,2),se=oe[0],ce=oe[1],ie=r.a.useState({isOpen:!1,src:"",title:""}),le=Object(i.a)(ie,2),ue=le[0],de=le[1],pe=r.a.useState(!1),je=Object(i.a)(pe,2),me=je[0],_e=je[1];function be(e,t,n){de({isOpen:e,src:t,title:n})}function he(){p(!d),console.log("LoginStatus changed: ",d)}function fe(){g(!1),A(!1),J(!1),G(!1),Q(!1),de({isOpen:!1})}return r.a.useEffect((function(){!function(){if(localStorage.getItem("token")){var t=localStorage.getItem("token");t&&function(e){return fetch("".concat(P,"/users/me"),{method:"GET",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():Promise.reject("### ERROR: ".concat(e.statusText))})).catch((function(e){return console.log(e)}))}(t).then((function(t){t&&(p(!0),console.log(t.data.email),o({email:t.data.email}),e.history.push("/"))}))}}(),w.getUserInfo().then((function(e){return ce(e)})).catch((function(e){return console.log("#####Error: user data; ",e)}))}),[]),r.a.useEffect((function(){w.getAllCards().then((function(e){$(e),ae(!1)})).catch((function(e){return console.log("Cards data error: ",e)}))}),[]),Object(j.jsxs)(f.Provider,{value:se,children:[Object(j.jsxs)("div",{className:"page",children:[Object(j.jsx)(h,{isLoggedIn:d,signOut:function(){localStorage.removeItem("token"),he(),_e(!1)},userData:a,onClose:fe,isMenuOpen:me,handleMenuOpen:function(){console.log("click",me),_e(!me)}}),Object(j.jsxs)(b.d,{children:[Object(j.jsx)(q,{exact:!0,path:"/",isLoggedIn:d,cards:Z,loadingSpinner:ne,onEditProfile:function(){g(!O)},onAddPlace:function(){A(!L)},onEditAvatar:function(){J(!M)},onCardClick:function(e){Q(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===se._id}));w.handleCardLikeStatus(e._id,!t).then((function(t){$((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log("#### Handle Like Error ####",e)}))},onDeleteCardClick:function(e){G(e)},setIsDeleteCardPopupOpened:G,component:x}),Object(j.jsx)(b.b,{path:"/signup",children:Object(j.jsx)(R,{handleTooltip:be,infoTolltip:ue,onClose:fe})}),Object(j.jsx)(b.b,{path:"/signin",children:d?Object(j.jsx)(b.a,{to:"/"}):Object(j.jsx)(z,{handleLoginStatus:he,handleTooltip:be,handleUserData:o,infoTolltip:ue,onClose:fe})}),Object(j.jsx)(b.b,{path:"*",children:Object(j.jsx)(D,{})})]}),Object(j.jsx)(v,{})]}),Object(j.jsx)(S,{card:K,onClose:fe}),Object(j.jsx)(C,{isOpen:O,onClose:fe,onUpdateUser:function(e){w.editUserInfo(e).then((function(e){ce(e),fe()})).catch((function(e){return console.log("#### Edit user failed ####",e)}))}}),Object(j.jsx)(y,{isOpen:M,onClose:fe,onUpdateAvatar:function(e){w.changeAvatar(e).then((function(e){ce(e),fe()})).catch((function(e){return console.log("#### Avatar update falied ####",e)}))}}),Object(j.jsx)(k,{isOpen:L,onClose:fe,onAddPlace:function(e){w.addNewCard(e).then((function(e){$([e].concat(Object(c.a)(Z))),fe()})).catch((function(e){return console.log("#### Add card failed ####",e)}))}}),Object(j.jsx)(E,{isOpen:H,onClose:fe,onDeleteCard:function(){var e;e=H,w.deleteCard(e._id).then((function(){$((function(t){return t.filter((function(t){return t._id===e._id?null:t}))})),fe()})).catch((function(e){return console.log("#### Delete card error ####",e)}))}})]})})),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),o(e),s(e)}))};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(p.a,{children:Object(j.jsx)(J,{})})}),document.querySelector("#root")),F()}},[[36,1,2]]]);
//# sourceMappingURL=main.a101df6c.chunk.js.map