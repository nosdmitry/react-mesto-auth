(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{24:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(26),o=a.n(s),c=(a(24),a(7)),i=a(2),l=a.p+"static/media/avatar-loader.7741db8b.gif",u=a(4),d=a.p+"static/media/logo.03b78ada.svg",m=a(11),j=a(0);var b=function(e){var t=e.userData,a=e.signOut,n=e.isMenuOpen;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:"navbar__item",children:Object(j.jsx)(m.b,{to:"#",className:"navbar__link ".concat(n?"navbar__link_place_wrap":""),children:t.email})}),Object(j.jsx)("li",{className:"navbar__item",children:Object(j.jsx)(m.b,{to:"/",onClick:a,className:"navbar__link ".concat(n?"navbar__link_place_wrap":""),children:"\u0412\u044b\u0439\u0442\u0438"})})]})};a.p;var p=function(e){var t=e.isLoggedIn,a=e.signOut,n=e.userData,r=e.location,s=e.handleMenuOpen,o=e.isMenuOpen;return Object(j.jsx)("ul",{className:"navbar",children:t?t&&window.innerWidth<768?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{className:"\n              header__menu-button \n              ".concat(o?"header__menu-button_type_opened":"header__menu-button_type_closed","\n            "),"aria-label":"menu button",onClick:s})}):Object(j.jsx)(b,{userData:n,signOut:a,isMenuOpen:o}):"/signup"===r.pathname?Object(j.jsx)("li",{className:"navbar__item",children:Object(j.jsx)(m.b,{to:"/signin",className:"navbar__link",children:"\u0412\u0445\u043e\u0434"})}):Object(j.jsx)("li",{className:"navbar__item",children:Object(j.jsx)(m.b,{to:"/signup",className:"navbar__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})})},_=a(3);var h=function(e){var t=Object(_.g)();return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("div",{className:"\n          user-data-wrap \n          ".concat(e.isMenuOpen?"":"user-data-wrap_visible_hidden","\n        "),children:Object(j.jsx)(b,Object(u.a)({},e))}),Object(j.jsx)("a",{href:"./",className:"header__logo-link",target:"_self",children:Object(j.jsx)("img",{src:d,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__logo"})}),Object(j.jsx)(p,Object(u.a)(Object(u.a)({},e),{},{location:t}))]})},f=r.a.createContext();var O=function(e){var t=e.card,a=e.openImage,n=e.onCardLike,s=e.onDeleteCardClick,o=r.a.useContext(f),c=o._id===t.owner._id,i=t.likes.some((function(e){return e._id===o._id}))?"galery__heart galery__heart_active":"galery__heart";return Object(j.jsxs)("article",{className:"galery__card",children:[Object(j.jsx)("button",{onClick:function(){s(t)},type:"button",className:"galery__delete-card-button galery__delete-card-button".concat(c?"":"_visible_hidden"),"aria-label":"Delete_card"}),Object(j.jsx)("img",{onClick:function(){a(t)},src:t.link,alt:t.name,className:"galery__img"}),Object(j.jsx)("h2",{className:"galery__text",children:t.name}),Object(j.jsxs)("div",{className:"galery__likes-wrap",children:[Object(j.jsx)("button",{onClick:function(){n(t)},type:"button","aria-label":"Like",className:i}),Object(j.jsx)("div",{className:"galery__heart galery__heart_loading galery__heart_visible_hidden"}),Object(j.jsx)("span",{className:"galery__likes-counter",children:t.likes.length})]})]})};var g=function(){return Object(j.jsx)("div",{className:"galery__card galery__card_loading"})};var x=function(e){var t=r.a.useContext(f);return Object(j.jsxs)("main",{children:[Object(j.jsxs)("section",{className:"profile",children:[Object(j.jsx)("button",{onClick:e.onEditAvatar,className:"profile__image profile__image",style:{backgroundImage:"url(".concat(t.avatar,")")},"aria-label":"\u0410\u0432\u0430\u0442\u0430\u0440"}),Object(j.jsxs)("div",{className:"profile__text-wrap",children:[Object(j.jsxs)("div",{className:"profile__title-wrap",children:[Object(j.jsx)("h1",{className:"profile__title","aria-label":"\u0418\u043c\u044f",children:t.name}),Object(j.jsx)("button",{onClick:e.onEditProfile,type:"button","aria-label":"Edit_profile",className:"profile__edit"})]}),Object(j.jsx)("p",{className:"profile__subtitle","aria-label":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:t.about})]}),Object(j.jsx)("button",{onClick:e.onAddPlace,type:"button","aria-label":"Add_img",className:"profile__add-card-button"})]}),Object(j.jsx)("section",{className:"galery galery_margins","aria-label":"\u0413\u0430\u043b\u0435\u0440\u0435\u044f",children:Object(j.jsx)("div",{className:"galery__cards",children:e.loadingSpinner?Object(j.jsx)(g,{}):e.cards.map((function(t){return Object(j.jsx)(O,{card:t,openImage:e.onCardClick,onCardLike:e.onCardLike,onDeleteCardClick:e.onDeleteCardClick},t._id)}))})})]})};var v=function(){return Object(j.jsx)("footer",{className:"footer",children:Object(j.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})},N=a(15);var C=function(e){return Object(j.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":""),children:Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsx)("button",{onClick:e.onClose,type:"button","aria-label":"Close_popup",className:"popup__exit-button exit exit_button_profile-popup"}),Object(j.jsx)("h3",{className:"popup__form-title",children:e.title}),Object(j.jsxs)("form",{onSubmit:e.onSubmit,name:"popup_form_".concat(e.name),className:"form popup__form",noValidate:!0,children:[e.children,Object(j.jsx)("button",{type:"submit",name:"submit-edit-profile",className:"form__submit form__submit_type_popup",children:e.submitName})]})]})})};var y=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,s=e.submitButtonName,o=Object(N.a)(),c=o.register,l=o.formState.errors,d=o.handleSubmit,m=r.a.useContext(f),b=r.a.useState(""),p=Object(i.a)(b,2),_=p[0],h=p[1],O=r.a.useState(""),g=Object(i.a)(O,2),x=g[0],v=g[1];return r.a.useEffect((function(){h(m.name),v(m.about)}),[m]),Object(j.jsxs)(C,{name:"profile-edit-form",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",submitName:s,isOpen:t,onClose:a,onSubmit:d((function(){n({name:_,about:x})})),children:[Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",Object(u.a)(Object(u.a)({type:"text"},c("name",{required:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",minLength:{value:2,message:"\u0418\u043c\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043a\u043e\u0440\u043e\u0447\u0435 \u0434\u0432\u0443\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},maxLength:{value:40,message:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435. \u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},value:_})),{},{placeholder:"\u0418\u043c\u044f",className:"form__input",onChange:function(e){h(e.target.value)}})),l.name&&Object(j.jsx)("span",{className:"form__error",children:l.name.message})]}),Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",Object(u.a)(Object(u.a)({type:"text"},c("description",{required:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",minLength:{value:2,message:"\u0418\u043c\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043a\u043e\u0440\u043e\u0447\u0435 \u0434\u0432\u0443\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},maxLength:{value:200,message:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435. \u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 200 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},value:x})),{},{minLength:"2",maxLength:"200",placeholder:"\u0420\u043e\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",className:"form__input",onChange:function(e){v(e.target.value)}})),l.description&&Object(j.jsx)("span",{className:"form__error",children:l.description.message})]})]})};var k=function(e){var t=e.isOpen,a=e.onClose,r=e.onUpdateAvatar,s=e.submitButtonName,o=Object(N.a)(),c=o.register,l=o.formState.errors,d=o.handleSubmit,m=Object(n.useState)(""),b=Object(i.a)(m,2),p=b[0],_=b[1];return Object(j.jsx)(C,{name:"change-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",submitName:s,isOpen:t,onClose:a,onSubmit:d((function(e){return console.log(p),void r({avatar:p})})),children:Object(j.jsxs)("label",{htmlFor:"userAvatar",className:"form__form-field",children:[Object(j.jsx)("input",Object(u.a)(Object(u.a)({id:"userAvatar",type:"url",required:!0},c("userAvatar",{required:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0430\u0434\u0440\u0435\u0441",value:p})),{},{placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"form__input",onChange:function(e){_(e.target.value)}})),l.userAvatar&&Object(j.jsx)("span",{className:"form__error",children:l.userAvatar.message})]})})};var S=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,s=e.submitButtonName,o=r.a.useState(""),c=Object(i.a)(o,2),l=c[0],d=c[1],m=r.a.useState(""),b=Object(i.a)(m,2),p=b[0],_=b[1],h=Object(N.a)(),f=h.register,O=h.formState.errors,g=h.handleSubmit;return Object(j.jsxs)(C,{name:"cards-add-form",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",submitName:s,isOpen:t,onClose:a,onSubmit:g((function(){n({name:l,link:p})})),children:[Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",Object(u.a)(Object(u.a)({id:"place-name",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"form__input"},f("title",{required:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",minLength:{value:2,message:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043a\u043e\u0440\u043e\u0447\u0435 \u0434\u0432\u0443\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},maxLength:{value:30,message:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043a\u043e\u0440\u043e\u0447\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},value:l})),{},{onChange:function(e){d(e.target.value)}})),O.title&&Object(j.jsx)("span",{className:"form__error",children:O.title.message})]}),Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",Object(u.a)(Object(u.a)({id:"place-url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"form__input",type:"url"},f("cardUrl",{required:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 URL \u0430\u0434\u0440\u0435\u0441",value:p})),{},{onChange:function(e){_(e.target.value)},required:!0})),O.cardUrl&&Object(j.jsx)("span",{className:"form__error",children:O.cardUrl.message})]})]})};var E=function(e){return Object(j.jsx)("div",{className:"popup galery galery_popup ".concat(e.card?"popup_opened":""),children:Object(j.jsxs)("figure",{className:"galery__popup-image-container",children:[Object(j.jsx)("button",{onClick:e.onClose,type:"button","aria-label":"Close_popup",className:"popup__exit-button galery__popup-exit"}),Object(j.jsx)("img",{src:e.card.link,alt:e.card.name,className:"galery__fulsize-img"}),Object(j.jsx)("figcaption",{className:"galery__popup-text",children:e.card.name})]})})};var T=function(e){var t=e.isOpen,a=e.onClose,n=e.onDeleteCard,r=e.submitButtonName;return Object(j.jsx)(C,{name:"card-delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",submitName:r,isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n()}})},L=a(16),A=a(17),w=new(function(){function e(t){Object(L.a)(this,e),this._url=t.url,this._headers=t.headers,this._body=t.body}return Object(A.a)(e,[{key:"_onError",value:function(e,t){return e.ok?e.json():Promise.reject("".concat(t,": ")+e.status)}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"users/me"),{headers:this._headers}).then((function(t){return e._onError(t,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0438 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}))}},{key:"editUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return t._onError(e,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}))}},{key:"getAllCards",value:function(){var e=this;return fetch("".concat(this._url,"cards/"),{headers:this._headers}).then((function(t){return e._onError(t,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a")}))}},{key:"addNewCard",value:function(e){var t=this;return fetch("".concat(this._url,"cards/"),{method:"POST",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return t._onError(e,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438")}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._onError(e,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u0447\u043e\u043a\u0438")}))}},{key:"handleCardLikeStatus",value:function(e,t){var a=this;console.log("hello from API!");var n=t?"PUT":"DELETE";return fetch("".concat(this._url,"cards/likes/").concat(e),{method:n,headers:this._headers}).then((function(e){return a._onError(e,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u043b\u0430\u0439\u043a\u0430")}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("https://mesto.nomoreparties.co/v1/cohort-20/users/me/avatar",{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return t._onError(e,"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0443")}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-20/",headers:{authorization:"036c4f02-47a4-4c62-a975-bbce507f165f"}});var D=function(){return Object(j.jsx)("h2",{className:"error",children:"404 \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430."})},P="https://auth.nomoreparties.co",I=a.p+"static/media/reg_confirm.1b6082f8.svg",U=a.p+"static/media/reg_failed.df8eddf6.svg";var B=function(e){var t=e.isOpen,a=e.src,n=e.title,r=e.handleCloseButton;return Object(j.jsx)("div",{className:"popup ".concat(t?"popup_opened":""),children:Object(j.jsxs)("div",{className:"popup__container popup__container_place_registration",children:[Object(j.jsx)("button",{onClick:r,type:"button","aria-label":"Close_popup",className:"popup__exit-button exit"}),Object(j.jsx)("img",{className:"popup__image",src:a,alt:n}),Object(j.jsx)("h3",{className:"popup__form-title",children:n})]})})};var R=Object(_.h)((function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(""),c=Object(i.a)(o,2),l=c[0],d=c[1];return Object(j.jsxs)("section",{className:"sign",children:[Object(j.jsx)("h3",{className:"sign__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),e.infoTolltip.isOpen?Object(j.jsx)(B,Object(u.a)(Object(u.a)({},e.infoTolltip),{},{handleCloseButton:e.onClose})):null,Object(j.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),function(e,t){return fetch("".concat(P,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.ok?e.json():Promise.reject("### ERRROR: ".concat(e.status))})).catch((function(e){return console.log(e)}))}(r,l).then((function(t){t?(e.handleTooltip(!0,I,"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),setTimeout((function(){e.onClose(),e.history.push("/signin")}),2e3)):e.handleTooltip(!0,U,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")}))},children:[Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{className:" form__input  form__input_type_sign",placeholder:"Email",onChange:function(e){s(e.target.value)}}),Object(j.jsx)("span",{className:"email-name-error form__error"})]}),Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{className:" form__input  form__input_type_sign  form__input_type_password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",autoComplete:"none",onChange:function(e){d(e.target.value)}}),Object(j.jsx)("span",{className:"password-name-error form__error"})]}),Object(j.jsx)("button",{className:"form__submit form__submit_type_sign",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(j.jsxs)("span",{className:"sign__reg-question",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",Object(j.jsx)(m.b,{to:"/signin",className:"sign__link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}));var q=Object(_.h)((function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(""),c=Object(i.a)(o,2),l=c[0],d=c[1];return Object(j.jsxs)("section",{className:"sign",children:[Object(j.jsx)("h3",{className:"sign__title",children:"\u0412\u0445\u043e\u0434"}),e.infoTolltip.isOpen?Object(j.jsx)(B,Object(u.a)(Object(u.a)({},e.infoTolltip),{},{handleCloseButton:e.onClose})):null,Object(j.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),function(e,t){return fetch("".concat(P,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.ok?e.json():Promise.reject("#### ERROR: ".concat(e.statusText))})).then((function(e){localStorage.setItem("token",e.token)}))}(r,l).then((function(){e.handleLoginStatus(),e.handleUserData({email:r}),e.history.push("/")})).catch((function(){e.handleTooltip(!0,U,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")}))},children:[Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{className:" form__input  form__input_type_sign",placeholder:"Email",onChange:function(e){s(e.target.value)}}),Object(j.jsx)("span",{className:"username-name-error form__error"})]}),Object(j.jsxs)("label",{className:"form__form-field",children:[Object(j.jsx)("input",{className:" form__input  form__input_type_sign  form__input_type_password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",autoComplete:"none",onChange:function(e){d(e.target.value)}}),Object(j.jsx)("span",{className:"password-name-error form__error"})]}),Object(j.jsx)("button",{className:"form__submit form__submit_type_sign",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})),z=a(28);var M=function(e){var t=e.component,a=Object(z.a)(e,["component"]);return Object(j.jsx)(_.b,{children:function(){return a.isLoggedIn?Object(j.jsx)(t,Object(u.a)({},a)):Object(j.jsx)(_.a,{to:"./signin"})}})};var F=Object(_.h)((function(e){var t=r.a.useState(!1),a=Object(i.a)(t,2),n=a[0],s=a[1],o=r.a.useState(!1),u=Object(i.a)(o,2),d=u[0],m=u[1],b=r.a.useState(!1),p=Object(i.a)(b,2),O=p[0],g=p[1],N=r.a.useState(!1),C=Object(i.a)(N,2),L=C[0],A=C[1],I=r.a.useState(!1),U=Object(i.a)(I,2),B=U[0],z=U[1],F=r.a.useState(!1),J=Object(i.a)(F,2),H=J[0],G=J[1],V=r.a.useState(!1),W=Object(i.a)(V,2),K=W[0],Q=W[1],X=r.a.useState([]),Y=Object(i.a)(X,2),Z=Y[0],$=Y[1],ee=r.a.useState(!0),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=r.a.useState(""),se=Object(i.a)(re,2),oe=se[0],ce=se[1],ie=r.a.useState({avatar:l,name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",about:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),le=Object(i.a)(ie,2),ue=le[0],de=le[1],me=r.a.useState({isOpen:!1,src:"",title:""}),je=Object(i.a)(me,2),be=je[0],pe=je[1],_e=r.a.useState({email:null}),he=Object(i.a)(_e,2),fe=he[0],Oe=he[1];function ge(e,t,a){pe({isOpen:e,src:t,title:a})}function xe(){m(!d),console.log("LoginStatus changed: ",d)}function ve(e){ce(e)}function Ne(){g(!1),A(!1),z(!1),G(!1),Q(!1),pe({isOpen:!1})}return r.a.useEffect((function(){!function(){if(localStorage.getItem("token")){var t=localStorage.getItem("token");t&&function(e){return fetch("".concat(P,"/users/me"),{method:"GET",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():Promise.reject("### ERROR: ".concat(e.statusText))})).catch((function(e){return console.log(e)}))}(t).then((function(t){t&&(m(!0),console.log(t.data.email),Oe({email:t.data.email}),e.history.push("/"))}))}}(),w.getUserInfo().then((function(e){return de(e)})).catch((function(e){return console.log("#####Error: user data; ",e)}))}),[]),r.a.useEffect((function(){w.getAllCards().then((function(e){$(e),ne(!1)})).catch((function(e){return console.log("Cards data error: ",e)}))}),[]),Object(j.jsxs)(f.Provider,{value:ue,children:[Object(j.jsxs)("div",{className:"page",children:[Object(j.jsx)(h,{isLoggedIn:d,signOut:function(){localStorage.removeItem("token"),xe(),s(!1)},userData:fe,onClose:Ne,isMenuOpen:n,handleMenuOpen:function(){console.log("click",n),s(!n)}}),Object(j.jsxs)(_.d,{children:[Object(j.jsx)(M,{exact:!0,path:"/",isLoggedIn:d,cards:Z,loadingSpinner:ae,onEditProfile:function(){ve("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),g(!O)},onAddPlace:function(){ve("\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),A(!L)},onEditAvatar:function(){ve("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),z(!B)},onCardClick:function(e){Q(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===ue._id}));w.handleCardLikeStatus(e._id,!t).then((function(t){$((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){return console.log("#### Handle Like Error ####",e)}))},onDeleteCardClick:function(e){ve("\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),G(e)},setIsDeleteCardPopupOpened:G,component:x}),Object(j.jsx)(_.b,{path:"/signup",children:Object(j.jsx)(R,{handleTooltip:ge,infoTolltip:be,onClose:Ne})}),Object(j.jsx)(_.b,{path:"/signin",children:d?Object(j.jsx)(_.a,{to:"/"}):Object(j.jsx)(q,{handleLoginStatus:xe,handleTooltip:ge,handleUserData:Oe,infoTolltip:be,onClose:Ne})}),Object(j.jsx)(_.b,{path:"*",children:Object(j.jsx)(D,{})})]}),Object(j.jsx)(v,{})]}),Object(j.jsx)(E,{card:K,onClose:Ne}),Object(j.jsx)(y,{isOpen:O,onClose:Ne,onUpdateUser:function(e){ve("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),w.editUserInfo(e).then((function(e){de(e),Ne()})).catch((function(e){return console.log("#### Edit user failed ####",e)}))},submitButtonName:oe}),Object(j.jsx)(k,{isOpen:B,onClose:Ne,onUpdateAvatar:function(e){ve("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),w.changeAvatar(e).then((function(e){de(e),Ne()})).catch((function(e){return console.log("#### Avatar update falied ####",e)}))},submitButtonName:oe}),Object(j.jsx)(S,{isOpen:L,onClose:Ne,onAddPlace:function(e){ve("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435..."),w.addNewCard(e).then((function(e){$([e].concat(Object(c.a)(Z))),Ne()})).catch((function(e){return console.log("#### Add card failed ####",e)}))},submitButtonName:oe}),Object(j.jsx)(T,{isOpen:H,onClose:Ne,onDeleteCard:function(){var e;e=H,ve("\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435..."),w.deleteCard(e._id).then((function(){$((function(t){return t.filter((function(t){return t._id===e._id?null:t}))})),Ne()})).catch((function(e){return console.log("#### Delete card error ####",e)}))},submitButtonName:oe})]})})),J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,41)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),s(e),o(e)}))};o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(m.a,{children:Object(j.jsx)(F,{})})}),document.querySelector("#root")),J()}},[[40,1,2]]]);
//# sourceMappingURL=main.e7cd82ca.chunk.js.map